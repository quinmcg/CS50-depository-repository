<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quin's Visualization</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <style>
        /*mp3 player styling (in html) using abbreviated CSS*/
        div#mp3_player{ width:1000px; height:500px; background:#4d4d4d; padding:5px; margin:50px auto; }
        div#mp3_player > div > audio{  width:1000px; background:#4d4d4d; float:left;  }
        div#mp3_player > canvas{ width:1000px; height:500px; background:#4d4d4d; float:left; }
    </style>
    <!--The JavaScript code: -->
    <script>
        function updateSource1(){
            audio.src ="songs/bitbird.mp3";
        }
        function updateSource2(){
            audio.src ="songs/gypsyheart.mp3";
        }
        function updateSource3(){
            audio.src ="songs/theone.mp3";
        }
        function updateSource4(){
            audio.src ="songs/firestone.mp3";
        }
        function updateSource5(){
            audio.src ="songs/breezeblocks.mp3";
        }
        function updateSource6(){
            audio.src ="songs/electricfeel.mp3";
        }
        function updateSource7(){
            audio.src ="songs/mrbrightside.mp3";
        }
        function updateSource8(){
            audio.src ="songs/puregrinding.mp3";
        }
        function updateSource9(){
            audio.src ="songs/timetopretend.mp3";
        }
        function updateSource10(){
            audio.src ="songs/smashmouth.mp3";
        }
        function updateSource11(){
            audio.src ="songs/stilldre.mp3";
        }
        function updateSource12(){
            audio.src ="songs/dlmd.mp3";
        }
        function updateSource13(){
            audio.src ="songs/summer.mp3";
        }
        function updateSource14(){
            audio.src ="songs/midnightcity.mp3";
        }        
        function updateSource15(){
            audio.src ="songs/hourglass.mp3";
        }
        //lines 16-20: ESTABLISHING THE AUDIO AND AUDIO SOURCE
        var audio = new Audio();
        audio.controls = false;
        audio.loop = true;
        audio.autoplay = true;
        var canvas, ctx, source, context, analyser, fbc_array, bars, bar_x, bar_width, bar_height;                      // Establishing all variables
        window.addEventListener("load", initMp3Player, false);                                                          // = "wait until the window loads to initiate the function initMp3Player"
        //ESTABLISHES AUDIO CONTEXT AND GETS AUDIO NODES
        function initMp3Player(){
            document.getElementById('audio_box').appendChild(audio);
            context = new webkitAudioContext();                                                                         // creates AudioContext object instance
            analyser = context.createAnalyser();                                                                        // creates AnalyserNode method
            canvas = document.getElementById('analyser_render');                                                        //
            ctx = canvas.getContext('2d');
            source = context.createMediaElementSource(audio);
            source.connect(analyser);
            analyser.connect(context.destination);
            frameLooper();
        }
        function frameLooper(){
            window.webkitRequestAnimationFrame(frameLooper);
            analyser.fftSize = 4096;
            fbc_array = new Uint8Array(analyser.frequencyBinCount);
            analyser.getByteFrequencyData(fbc_array);
            ctx.clearRect(0, 0, canvas.width, canvas.height);                                                           // Clear the canvas
            bars = 200;
            for (var i = 0; i < bars; i++) {
                bar_x = i * 3;
                bar_width = 2;
                bar_height = -(fbc_array[i] / 2);
                var bar_gradient = ctx.createLinearGradient(0, 0, 0, 100);
                bar_gradient.addColorStop(0, "#26EC54");
                bar_gradient.addColorStop(1, "#23297a");
                //bar_gradient.addColorStop(1, rgb(10,' + (255-(bar_height+155)) + ' , ' + (255 -(bar_height)) + '));
                ctx.fillStyle = bar_gradient;
                ctx.fillRect(bar_x, canvas.height/2, bar_width, bar_height/2);
                ctx.shadowColor = 'rgba(0,0,0,1)';
                ctx.shadowOffsetX = 3;
                ctx.shadowOffsetY = 5;
                ctx.shadowBlur = 3;
            }
        }
    </script>
</head>
<body>
<ul class="nav">
    <div class="logo">
        VISUALIZER
    </div>
    <li> <a href="index.html">Visualizer 1.0</a></li>
    <li> <a href="visualizer2.html">Visualizer 2.0</a></li>
    <li> <a href="about.html">About</a></li>
    <li> <a href="sources.html">Sources</a></li>
    <li> <a href="contact.html">Contact</a></li>
</ul>
<div class="banner">
    <img class="banner-image" src="img/banner2.png"/>
</div>
<div id="mp3_player">
    <div id="audio_box"></div>
    <canvas id="analyser_render"></canvas>
</div>
<div class="songName">
    <script>
        //lines 81-91: DEFINING songInfo WHICH IS FOR DISPLAYING SONG TITLE ON WEBPAGE
        var songInfo;
        if (audio.src === 'https://quinmcg.github.io/songs/theone.mp3'){                                   // Song 1: The One - The Chainsmokers
            songInfo = '<em>The One - <strong>The Chainsmokers</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/bitbird.mp3'){                                  // Song 2: zZz - DROELOE
            songInfo = '<em>zZz - <strong>DROELOE</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/gyspyheart.mp3'){                               // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Gypsy Heart - <strong>BUNT.</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/firestone.mp3'){                                // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Firestone - <strong>Kygo</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/breezeblocks.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Breezeblocks - <strong>Alt-J(∆)</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/electricfeel.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Electric Feel - <strong>MGMT</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/mrbrightside.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Mr. Brightside - <strong>The Killers</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/puregrinding.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Pure Grinding - <strong>Avicii</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/timetopretend.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Time to Pretend- <strong>MGMT</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/smashmouth.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>All Star - <strong>Smash Mouth</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/stilldre.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Still Dre - <strong>Dr. Dre</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/dlmd.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Don\'t Let Me Down - <strong>The Chainsmokers</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/summer.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Summer- <strong>Marshmello</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/midnightcity.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Midnight City - <strong>M83</em></strong>';
        }
        if (audio.src === 'https://quinmcg.github.io/songs/hourglass.mp3'){                             // Song 3: Gypsy Heart - BUNT.
            songInfo = '<em>Hourglass Mix- <strong>Zedd</em></strong>';
        }
    </script>
</div>
<audio id="audio">
    <source id="musicSource" type="audio/mp3">
    Your browser does not support the audio format.
</audio>
<ul style="list-style: none">
    <li id="songsMenu">SONGS
        <ul id="songsItems">
            <li id="song1" data-value="bitbird.mp3">
                <button onclick="updateSource1();">zZz - <em>DROELOE</em></button>
            </li>
            <li id="song2" data-value="gypsyheart.mp3">
                <button onclick="updateSource2();">Gypsy Heart - <em>BUNT.</em></button>
            </li>
            <li id="song3" data-value="theone.mp3">
                <button onclick="updateSource3();">The One - <em>The Chainsmokers</em></button>
            </li>
            <li id="song4" data-value="firestone.mp3">
                <button onclick="updateSource4();">Firestone - <em>Kygo</em></button>
            </li>
            <li id="song5" data-value="breezeblocks.mp3">
                <button onclick="updateSource5();">Breezeblocks - <em>Alt-J (∆)</em></button>
            </li>
            <li id="song6" data-value="electricfeel.mp3">
                <button onclick="updateSource6();">Electric Feel - <em>MGMT</em></button>
            </li>
            <li id="song7" data-value="mrbrightside.mp3">
                <button onclick="updateSource7();">Mr. Brightside - <em>The Killers</em></button>
            </li>
            <li id="song8" data-value="puregrinding.mp3">
                <button onclick="updateSource8();">Pure Grinding - <em>Avicii</em></button>
            </li>
            <li id="song9" data-value="timetopretend.mp3">
                <button onclick="updateSource9();">Time to Pretend - <em>MGMT</em></button>
            </li>
            <li id="song10" data-value="timetopretend.mp3">
                <button onclick="updateSource10();">All Star- <em>Smash Mouth</em></button>
            </li>
            <li id="song11" data-value="stilldre.mp3">
                <button onclick="updateSource11();">Still Dre (Clean)- <em>Dr. Dre</em></button>
            </li>
            <li id="song12" data-value="dlmd.mp3">
                <button onclick="updateSource12();">Don't Let Me Down- <em>The Chainsmokers</em></button>
            </li>
            <li id="song13" data-value="summer.mp3">
                <button onclick="updateSource13();">Summer- <em>Marshmello</em></button>
            </li>
            <li id="song14" data-value="midnightcity.mp3">
                <button onclick="updateSource14();">Midnight City- <em>M83</em></button>
            </li>
            <li id="song15" data-value="hourglass.mp3">
                <button onclick="updateSource15();">Hourglass Mix- <em>Zedd</em></button>
            </li>
        </ul>
    </li>
</ul>
</body>
</html>
